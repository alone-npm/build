"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("url"),r=require("path"),t=require("fs"),o="undefined"!=typeof document?document.currentScript:null;const i={copy(e,r,t=!1){"string"==typeof e?this._copySingle(e,r,t):Array.isArray(e)?this._copyMultiple(e,r,t):"object"==typeof e&&this._copyMap(e,t)},_copySingle(e,r,o){if(!t.existsSync(e))return;if(t.existsSync(r)&&!o)return;const i=t.statSync(e);i.isDirectory()?this._copyDirectory(e,r):i.isFile()&&this._copyFile(e,r)},_copyDirectory(e,o){t.existsSync(o)||t.mkdirSync(o,{recursive:!0});const i=t.readdirSync(e);for(const t of i){const i=r.join(e,t),c=r.join(o,t);this._copySingle(i,c,!0)}},_copyFile(e,r){t.copyFileSync(e,r)},_copyMultiple(e,t,o){for(const i of e){const e=r.join(t,r.basename(i));this._copySingle(i,e,o)}},_copyMap(e,r){for(const[t,o]of Object.entries(e))this._copySingle(t,o,r)}};exports.FileManager=i,exports.default=function(c,{name:s="projectPackage",pack:n=()=>null}={}){const p=r.dirname(e.fileURLToPath("undefined"==typeof document?require("url").pathToFileURL(__filename).href:o&&"SCRIPT"===o.tagName.toUpperCase()&&o.src||new URL("create.js",document.baseURI).href)),l=process.argv[2]||s,y=r.resolve(process.cwd(),l);i.copy(r.resolve(p,"pack"),r.resolve(y,"pack"),!0),"object"==typeof c&&(Array.isArray(c)?c.forEach(e=>{i.copy(r.resolve(p,e),r.resolve(y,e),!0)}):Object.keys(c).forEach(e=>{i.copy(r.resolve(p,e),r.resolve(y,c[e]),!0)})),n&&"function"==typeof n&&n({install:p,name:l,app:y,pack:{file:r.resolve(process.cwd(),"package.json"),is(){return t.existsSync(this.file)},get(){return this.is()?JSON.parse(t.readFileSync(this.file,"utf-8")||"{}"):{}},save(e){return t.writeFileSync(this.file,JSON.stringify(e,null,2))}}})};
