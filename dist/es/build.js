import t from"@rollup/plugin-node-resolve";import e from"@rollup/plugin-commonjs";import o from"@rollup/plugin-terser";import{builtinModules as s}from"module";import u from"path";function r(r,{config:n,external:i,es:c,cjs:d,umd:p}={}){const m=[],a=({output:t,config:e,external:o,es:s,cjs:u,umd:r}={})=>({output:void 0===t?"dist":t,config:"object"!=typeof e?{}:e,external:void 0===o||o,es:void 0===s||s,cjs:void 0===u||u,umd:void 0===r||r}),l={...a({output:r,config:n,external:i,es:c,cjs:d,umd:p})};return{set(r,{config:n,external:i,es:c,cjs:d,umd:p}={}){return"object"==typeof r?Array.isArray(r)?r.forEach((t=>this.set(t))):Object.keys(r).forEach((t=>this.set(t,r[t]))):((r,{output:n,config:i,external:c,es:d,cjs:p,umd:l}={})=>{const f={...a({output:n,config:i,external:c,es:d,cjs:p,umd:l})},j={input:r,plugins:[t(),e(),o()]},x=(t,e,o)=>!t.endsWith(e)&&"umd"!==o&&(!(!t.startsWith("./")&&!t.startsWith("../"))||!!s.includes(t)||/node_modules/.test(t));["es","cjs","umd"].forEach((t=>{if(f[t]){const e={...j,output:{dir:f.output+"/"+t,format:t,exports:"named",..."object"==typeof f[t]?f[t]:{}}};"umd"===t&&(e.output.name=u.basename(r,".js")),!0===f.external?e.external=e=>x(e,r,t):"function"==typeof f.external&&(e.external=e=>f.external(e,r,t,(()=>x(e,r,t)))),m.push({...e,...f.config})}}))})(r,{output:l.output,config:void 0===n?l.config:n,external:void 0===i?l.external:i,es:void 0===c?l.es:c,cjs:void 0===d?l.cjs:d,umd:void 0===p?l.umd:p}),this},get:()=>m}}export{r as default};
